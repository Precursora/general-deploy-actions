name: Open PR to Main
on:
  workflow_call:
jobs:
  origin-validation:
    name: Origin validation
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
      - run: echo "⏳ Abrindo pull request para a branch Main..."
  deploy:
    needs: origin-validation
    name: Deploy to DEV
    environment: DEV
    runs-on: ubuntu-latest
    steps:
      - run: echo "⏳ Deploying in DEV..."
  create-pr:
    needs: origin-validation
    name: Create PR to Main
    uses: ./.github/workflows/ext-create-pull-request.yml
    with:
      base: main
      head: develop
      labels: production
    secrets: inherit

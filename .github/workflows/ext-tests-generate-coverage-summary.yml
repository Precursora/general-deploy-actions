name: Generate Coverage Summary
on:
  workflow_call:
    inputs:
      unit-tests-report:
        type: string
        required: true
      mutation-tests-report:
        type: string
        required: true
jobs:
  generate-coverage-summary:
    name: Coverage
    runs-on: ubuntu-latest
    steps:
      - name: Coverage
        run: |
          echo "ConstruÃ§Ã£o de relatÃ³rio de testes unitÃ¡rios..."

          if [[ "${{inputs.unit-tests-report}}" != "" ]]; then
            echo "aqui 1"
            echo "${{inputs.unit-tests-report}}"
          else
            echo "aqui 2"
          fi

          summaryUnitTests="| UnitÃ¡rio | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ |"

          echo "ConstruÃ§Ã£o de relatÃ³rio de testes mutantes..."


          summaryMutationTests="| UnitÃ¡rio | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ |"

          # Summary constrution
          summaryHeader="| Tipo | Cobertura ðŸ§ | Sucesso ðŸ˜Ž | Falha ðŸ¥² | Sem cobertura ðŸ˜¬ | Ignorado ðŸ˜‘ | Tempo de execuÃ§Ã£o ðŸ¥± | Cobertura mÃ­nima atingida ðŸ«£ |"
          summaryAlign="|:--|--|--|--|--|--|--|:--|"

          # Summary export
          summary="${summaryHeader}\n${summaryAlign}\n${summaryUnitTests}\n${summaryMutationTests}"
          echo -e "${summary}" >> $GITHUB_STEP_SUMMARY
